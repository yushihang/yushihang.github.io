---
layout: post
title: 我对 W3C DID 1.0 标准的理解
subtitle: 抛砖引玉, 仅供参考
categories: DID Web3
tags: [DID, issuer, holder, vc, vp]
---

## 我对 W3C DID 1.0 标准的理解

先放[官方链接](https://www.w3.org/TR/did-core/)

我对这个东西的理解比较肤浅，仅供参考。

### DID 的全称

DID 的全称为 Decentralized Identifiers (去中心化身份)

### 现有的中心化的应用场景

我喜欢用如下生活体验的场景来解释 DID 的作用：

- #### 证明的签署和发放

  (证明的)`发行方`签署证明后,为(证明的)`持有人`发放证明

  - `政府`给`公民`发放`身份证`
  - `银行`给`用户`发放`资产证明`
  - `大学`给`学生`发放`毕业证书`
  - `公司`给`员工`提供`在职证明`

- #### 证明的使用(提交)

  `持有人`将自己获得的证明提交给`验证方`以证明某些信息

  - `公民`将`身份证`提交给`验证方`以证明自己的公民身份 (例如去`高铁站`用`身份证`买票乘车)
  - `用户`将`资产证明`提交给`验证方`以证明自己的资产 (例如去`领事馆`办理旅游签证)
  - `学生`将`毕业证书`提交给`验证方`以证明自己的学历 (例如去`用人单位`面试)
  - `员工`将`在职证明`提交给`验证方`以证明自己的在职状态 (例如去`银行`办理贷款)

- #### 证明的真实性验证

  `验证方`对证明的真实性进行验证

  - `高铁站`需要验证`身份证`的真实性，以及是否属于`持有人`
  - `领事馆`需要验证`资产证明`的真实性，以及是否属于`持有人`
  - `用人单位`需要验证`毕业证书`的真实性，以及是否属于`持有人`
  - `银行`需要验证`在职证明`的真实性，以及是否属于`持有人`

这些证明都是由某个`发行方`签发的，而且都是`中心化`的。

这里的`中心化`的意思是，如果`验证方`需要验证这些证明的有效性，需要联系`发行方`。

对于`身份证`，`验证方`需要使用设备读取身份证上的信息，然后通过网络连接`政府`提供的服务器来验证身份证的有效性。
对于`资产证明`，`验证方`如果只是通过查看公章，那么伪造一枚公章可能就可以欺骗`验证方`。为了更准确的验证，`验证方`需要联系`银行`，通过`银行`的来验证`资产证明`的有效性。
其他的证明也是类似的。

`中心化`的解决方案存在的问题显而易见:

1. `发行方`的提供的验证服务可能被假冒
2. `发行方`的提供的验证服务可能因为异常而中断
3. 一些小的`发行方`, 可能根本就没有能力提供验证服务
4. 对于一些防伪程度不高的证明，`发行方`本身可能也无法确认是否由自己发放
5. 其他未详细列出的问题

(一个特殊的例子是, `毕业证书`可以去教育部网站查询，虽然不直接由`发行方`(`大学`)提供验证，但是这种验证方式也是`中心化`的)

用流程图描述上面的过程如下:

![传统的证明流程]({{ "/assets/images/2024-01-16/did-tranditional.drawio.png" | absolute url }})

### 去中心化的解决方案

因为本文的主题是 DID (Decentralized Identifiers), 我们就来看看 DID 是如何解决上面的问题的。

DID 为我们提供的解决方案如下:

参与 DID 流程的三方分别叫做 `Issuer`, `Holder`, `Verifier`

1. Issuer 为 Holder 颁发 VC (Verifiable Credentials)

2. Holder 拿到 VC 后, 可以按需将 VC 提供给 Verifier 进行验证。

3. Verifier 收到 Holder 发来的 VC 之后, 可以在不需要 Issuer 配合，甚至不需要知会 Issuer 的情况下，验证 VC 的有效性。
   即如下内容
   - 这份 VC 是否由对应的 Issuer 签发
   - VC 是签发给当前提交 VC 的 Holder，而不是其他 Holder
   - VC 里的内容是否被篡改过
4. Verifier 验证了 VC 的有效性后，可以根据 VC 里的内容，决定是否给 Holder 提供服务

   VC 里的内容在 DID 中称作 `claim``

   例如身份证对应的 VC 里包含了以下 `claim``

   - 身份证号
   - 姓名
   - 性别
   - 出生日期
   - 发证机构
   - 证件有效期

从步骤中可以看出,第 1、2、4 步都是和传统的流程一样的，只有第 3 步不一样，他是怎么做到的呢？

### DID 的实现基础

#### 公私钥对

公私钥对是非对称加密的基础，这里不再赘述。 相关文档网络上很多,例如[这篇文章](https://www.preveil.com/blog/public-and-private-key/)

### DID 没有完全解决的问题

我认为 DID 没有完全解决电子身份和现实中的身份的对应关系。
例如域名和实体的对应关系。
